{
  "C:\\Users\\kjami\\WorkCS\\Royal Garden\\Managing-Program-Backend\\serverless.yml": {
    "versionFramework": "3.38.0",
    "servicePath": "C:\\Users\\kjami\\WorkCS\\Royal Garden\\Managing-Program-Backend\\serverless.yml",
    "serviceConfigFileName": "serverless.yml",
    "service": {
      "org": "kjpersonal",
      "app": "royal-garden",
      "service": "royal-garden-document-service",
      "provider": {
        "name": "aws",
        "runtime": "nodejs18.x",
        "stage": "dev",
        "region": "us-east-1",
        "environment": {
          "S3_BUCKET_NAME": "${self:custom.s3BucketName}",
          "CLOUDFRONT_DISTRIBUTION_ID": "${self:custom.cloudFrontDistributionId}",
          "URL_EXPIRATION_TIME": 3600
        },
        "iam": {
          "role": {
            "statements": [
              {
                "Effect": "Allow",
                "Action": [
                  "s3:ListBucket",
                  "s3:GetObject",
                  "s3:PutObject",
                  "s3:DeleteObject"
                ],
                "Resource": [
                  "arn:aws:s3:::${self:custom.s3BucketName}",
                  "arn:aws:s3:::${self:custom.s3BucketName}/*"
                ]
              },
              {
                "Effect": "Allow",
                "Action": [
                  "cloudfront:CreateInvalidation"
                ],
                "Resource": "*"
              }
            ]
          }
        }
      },
      "custom": {
        "s3BucketName": "royal-garden-document-service-documents-dev",
        "cloudFrontDistributionId": ""
      },
      "functions": {
        "listFiles": {
          "handler": "src/functions/listFiles.handler",
          "events": [
            {
              "http": {
                "path": "files",
                "method": "get",
                "cors": true
              }
            }
          ]
        },
        "getFile": {
          "handler": "src/functions/getFile.handler",
          "events": [
            {
              "http": {
                "path": "files/{key+}",
                "method": "get",
                "cors": true
              }
            }
          ]
        },
        "uploadFile": {
          "handler": "src/functions/uploadFile.handler",
          "events": [
            {
              "http": {
                "path": "files",
                "method": "post",
                "cors": true
              }
            }
          ]
        },
        "deleteFile": {
          "handler": "src/functions/deleteFile.handler",
          "events": [
            {
              "http": {
                "path": "files/{key+}",
                "method": "delete",
                "cors": true
              }
            }
          ]
        }
      },
      "resources": {
        "Resources": {
          "DocumentsBucket": {
            "Type": "AWS::S3::Bucket",
            "Properties": {
              "BucketName": "${self:custom.s3BucketName}"
            }
          },
          "CloudFrontOriginAccessIdentity": {
            "Type": "AWS::CloudFront::CloudFrontOriginAccessIdentity",
            "Properties": {
              "CloudFrontOriginAccessIdentityConfig": {
                "Comment": "OAI for royal-garden-document-service-documents-dev"
              }
            }
          }
        }
      }
    },
    "provider": {
      "name": "aws",
      "runtime": "nodejs18.x",
      "stage": "dev",
      "region": "us-east-1"
    }
  }
}